<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1500</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>day=0
time=6

draw_set_font(display_font)
draw_set_colour(c_white)

//window_set_fullscreen(true)



//only for prototype
/*
welcome_message_one="Witaj! Aby ewakuowac miasto (pomaranczowe kwadraty) musisz umiescic w nim jednostke piechoty i czekac az populacja spadnie do zera"
welcome_message_two="Kwadrat z czerwonym krzyzem to szpital. Mozna w nim leczyc jednostki piechoty i czolgow"
welcome_message_three="Jezeli potwory beda atakowac twoje miasto zbyt dlugo, zamieni sie ono w siedlisko. Z siedliska beda wykluwac sie kolejne potwory"
welcome_message_four="Potwory nie moga zolozyc siedliska w opuszczonym miescie"
welcome_message_five="Kontroluj poziom paniki! Spanikowane jednostki moga uciec z pola walki"
welcome_message_six="To chyba wszytsko. Powodzenia :)"

show_message(welcome_message_one)
show_message(welcome_message_two)
show_message(welcome_message_three)
show_message(welcome_message_four)
show_message(welcome_message_five)
show_message(welcome_message_six)
*/

monsters_multiplier=1
//cities list definition
for(i=0;i&lt;instance_number(obj_City);i++){
    cities[i]=(instance_find(obj_City,i)).id
}

current_unit=undefined;
credits=500;

//credits+=obj_City.instance_count*200

//date string will use monster multiplier, because why not

people_killed=0
people_saved=0

time_text="CZAS: "+string(time)+":00 DZIEN: "+string(day)

alarm[0]=300 //300frames = 1hour

/*VERY IMPORTANT!
 *Panic level declaration
 *This indicator has STRONG impact on gameplay
 *So proceed with caution when modyfing it in any way
*/

panic_level=random(11);

panic_string="POZIOM PANIKI: "+string(panic_level)

monsters_killed=0
units_killed=0

game_paused=false

cursor_sprite=cur_Cursor

draw_offset=sprite_get_width(gui_Button)+10

//weather
current_weather=choose("SLONECZNA", "POCHMURNO", "DESZCZ", "MGLA", "BURZA")
weather_duration=round(random(5))


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//game over event

if(!obj_Controller.game_paused){
    obj_Controller.game_paused=true
    instance_deactivate_all( false )
    
instance_create(room_width/2,room_height/2,gui_VictoryScreen)
gui_VictoryScreen.deaths=people_killed
gui_VictoryScreen.savings=people_saved

gui_VictoryScreen.alarm[0]=10
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//cities list definition
for(i=0;i&lt;instance_number(obj_City);i++){
    cities[i]=(instance_find(obj_City,i)).id
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//hour event



if(time==23){
    time=0;
    day++
    }
else time++

if(instance_number(obj_Infantry)&lt;=instance_number(obj_Monsters))
    {   
        if(panic_level&lt;90)
            panic_level++;
    }

if(instance_number(obj_City)+instance_number(obj_AbandonedCity)&lt;=instance_number(obj_Colony))
    {   
        if(panic_level&lt;90)
            panic_level+=3
    }

if(instance_exists(obj_Civilian)){
    if(instance_number(obj_Civilian)&gt;15)panic_level+=2
        //show_message("za duzo!")
}

if(time==6){credits+=instance_number(obj_City)*100;}
if(time%6 == 0){
    if(monsters_killed&gt;units_killed)monsters_multiplier++
}
time_text="CZAS: "+string(time)+":00 DZIEN: "+string(day)
panic_string="POZIOM PANIKI: "+string(panic_level)
//show_message(string(room_speed))
credits+=instance_number(obj_City)*10
alarm[0]=300

if(!instance_exists(obj_City)&amp;&amp;!instance_exists(obj_Civilian))
    alarm[2]=1
    
if(panic_level&gt;90)
    panic_level=90

if(weather_duration&gt;0) 
    weather_duration--;
    else     {
    current_weather=choose("SLONCE", "CHMURY", "DESZCZ", "MGLA", "BURZA")
    weather_duration=round(random(5))
    }


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//movement order
if(mouse_check_button_pressed(mb_right)&amp;&amp;current_unit!=undefined){
    current_unit.targetX=mouse_x;
    current_unit.targetY=mouse_y;
    current_unit.alarm[0]=1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
draw_text(x+draw_offset,y,time_text)
draw_text(x+draw_offset+256,y,panic_string)
draw_text(x+draw_offset+512,y,"Kredyty: "+string(credits))

if(credits&gt;1000)
    credits=1000
    
if(panic_level&lt;0)
    panic_level=1

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>time=4
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>time=2
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
